{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n    formEl: document.querySelector(\".js-search-form\"),\nimagesList: document.querySelector(\".js-images-list\"),\nloaderEl: document.querySelector(\".loader\"),\nloaderMoreEl: document.querySelector(\".loader-more\"),\nbuttonMoreEl: document.querySelector(\".load-button\"),\nehdLoaderEl: document.querySelector(\".end-loader\"),\nimadgeItem: document.querySelector(\".images-list-item\"),\n}","export function createMarcup(arr) {\n\n    return arr.map(({id, webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>\n        `<li class=\"images-list-item\" data-id='${id}'>\n        <a class=\"images-list-link\" href=\"${largeImageURL}\">\n            <img class=\"images-list-image\" src=\"${webformatURL}\" alt=\"${tags}\"></img>\n        </a>\n        <div class=\"tumb\">\n            <div class=\"block\">\n                <h2 class=\"tittle\">Likes</h2>\n                <p class=\"text\">${likes}</p>\n            </div>\n            <div class=\"block\">\n                <h2 class=\"tittle\">Views</h2>\n                <p class=\"text\">${views}</p>\n            </div>\n            <div class=\"block\">\n                <h2 class=\"tittle\">Comments</h2>\n                <p class=\"text\">${comments}</p>\n            </div>\n            <div class=\"block\">\n                <h2 class=\"tittle\">Downloads</h2>\n                <p class=\"text\">${downloads}</p>\n            </div>\n        </div>\n    </li>`\n    \n    \n    ).join('')\n    }","import axios from \"axios\";\n\nexport async function searchImages(value, page) {\n    const BASE_URL = `https://pixabay.com/api/`;\n    const API_KEY = \"43313350-287c14b2000f5e13b9dad3a59\";\n    const perPage = 15;\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: value,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n    })\n\n    try {\n        const response = await axios(`${BASE_URL}?${params}`);\n    return response.data;\n\n    }  catch(error){\n        if(error.length != undefined) {\n          iziToast.error({\n              title: 'Error',\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n                \n            });\n        }\n      }  \n    \n\n    // return fetch(`${BASE_URL}?${params}`)\n    // .then(recponse => {\n    //     if(!recponse.ok) {\n    //         throw new Error(recponse.statusText)\n    //     }\n      \n    //     return recponse.json();\n    // } );\n}","import { refs } from \"./js/refs\";\nimport { createMarcup } from \"./js/render-functions\";\nimport { searchImages } from \"./js/pixabay-api\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet searchInput;\nlet currentPage = 1;\nconst perPage = 15;\nconst lightbox = new SimpleLightbox('.js-images-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.loaderEl.style.display = 'none';\nrefs.loaderMoreEl.style.display = 'none';\nrefs.buttonMoreEl.style.display = 'none';\nrefs.ehdLoaderEl.style.display = 'none';\n\nrefs.buttonMoreEl.addEventListener('click', handleClick);\nrefs.formEl.addEventListener('submit', handleSubmit);\n\n async function handleSubmit(event){\n    event.preventDefault();\n    currentPage = 1;\n    refs.loaderEl.style.display = 'block';\n    refs.imagesList.innerHTML = '';\n\n  searchInput = event.currentTarget.querySelector('.search-input').value.trim();\n\n  if (searchInput === \"\") {\n    iziToast.error({title: 'Error', messege: 'Sorry, there are no images matching your search query. Please try again!',})\n    return;\n}\ntry {\n\n    const data = await searchImages(searchInput, currentPage);\n    const totalPages = Math.ceil(data.totalHits / perPage);\n    refs.imagesList.insertAdjacentHTML('beforeend', createMarcup(data.hits));\n    refs.formEl.reset();\n    refs.loaderEl.style.display = 'none';\n\n    if (!data.totalHits) {\n        iziToast.error({\n            title: 'Oops',\n            message: 'Undefined',\n            });\n    } else {\n   \n        iziToast.success({\n            title: 'Wow',\n            message: `We found ${data.totalHits} pictures!`,\n          });\n        }\n    \n    if (currentPage === totalPages) {\n        refs.buttonMoreEl.style.display = 'none';\n        refs.ehdLoaderEl.style.display = 'block';\n      } else {\n        if (!data.totalHits) {\n            refs.buttonMoreEl.style.display = 'none';\n        } else {\n        refs.buttonMoreEl.style.display = 'block';\n      }\n    }\n} catch (error) {loader.style.display = \"none\";\nreturn iziToast.error({\n    message: `${error.message}`,\n    position: \"topCenter\"});\n};\n  \n  lightbox.refresh();\n  refs.loaderEl.style.display = 'none';\n    \n}\n\nasync function handleClick() {\n    currentPage += 1;\n\n    refs.loaderMoreEl.style.display = 'block';\n    refs.buttonMoreEl.style.display = 'none';\n\n    try {\n        const data = await  searchImages(searchInput, currentPage);\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        refs.imagesList.insertAdjacentHTML('beforeend', createMarcup(data.hits));\n        // refs.formEl.reset();\n        if (currentPage === totalPages) {\n            refs.buttonMoreEl.style.display = 'none';\n            refs.ehdLoaderEl.style.display = 'block';\n          } else {\n            refs.buttonMoreEl.style.display = 'block';\n          }\n\n    } catch (error) {\n        loader.style.display = \"none\";\n    return iziToast.error({\n        message: `${error.message}`,\n        position: \"topCenter\"});\n    }\n\n    const height = () =>\n    refs.imadgeItem.getBoundingClientRect().height;\n  \n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n\n  lightbox.refresh();\n  refs.loaderMoreEl.style.display = 'none';  \n  }\n\n\n"],"names":["refs","createMarcup","arr","id","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchImages","value","page","BASE_URL","API_KEY","params","axios","error","searchInput","currentPage","perPage","lightbox","SimpleLightbox","handleClick","handleSubmit","event","iziToast","data","totalPages","height"],"mappings":"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"}