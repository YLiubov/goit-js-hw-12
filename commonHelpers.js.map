{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// key_pixabay 43258927-612e11e8a955b04f9334ad244\n\nimport axios from 'axios';\n\naxios.defaults.baseURL =  \"https://pixabay.com/api/\";\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\nconst API_KEY = \"43258927-612e11e8a955b04f9334ad244\";\nconst urlAXIOS = `?key=${API_KEY}`;\nexport async function fetchData(query, page) {\n  \n  const response = await axios.get(urlAXIOS,  {\n    params: {\n      q: query,\n      page,\n         per_page: 15,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true\n    }\n\n     \n  })\n  return response.data;\n}\n\n//   export  async function fetchData(url, options = {}) {\n//     const response = await fetch(url, options);\n//     if(!response.ok) {\n//         throw new Error(response.statusText);\n//     }\n//     return await response.json();\n// }\n","export function createMarkup(arr) {\n    return arr.map(({id, largeImageURL, webformatURL, tags, likes, views, comments, downloads }\n) => `\n        <li class=\"list-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"short-card\" >\n            <ul class=\"list-item\" >\n            <li class=\"card-foot\">\n            <div class=\"item\" >\n            <p class=\"item-div\">Likes</p>\n            <p class=\"item-div\">${likes}</p>\n            </div> \n            </li>\n            <li class=\"card-foot\">\n            <div class=\"item\" >\n            <p class=\"item-div\">Views</p>\n            <p class=\"item-div\">${views}</p>\n            </div> \n            </li>\n            <li class=\"card-foot\">\n            <div class=\"item\" >\n            <p class=\"item-div\">Comments</p>\n            <p class=\"item-div\">${comments}</p>\n            </div> \n            </li>\n  \n            <li class=\"card-foot\">\n            <div class=\"item\" >\n            <p class=\"item-div\">Downloads</p>\n            <p class=\"item-div\">${downloads}</p>\n            </div> \n            </li>\n            \n            </ul>\n            </a>\n        </li>\n    `).join(\"\")\n}","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nimport { fetchData } from \"./js/pixabay-api\";\n\nimport { createMarkup } from \"./js/render-functions\";\n\nconst PIXABAY_URL = \"https://pixabay.com/api/\"\n\n\nconst form = document.querySelector(\".ask-form\");\nconst container = document.querySelector(\".container\");\n const load = document.querySelector(\".loader\");\nconst target = document.querySelector('.js-backdrop');\nconst loadBtn = document.querySelector('.js-load-more');\n\n load.style.display = \"none\";\nlet page = 1;\nlet serh = null;\nlet ligthBox;\n// const container = document.querySelector(\".list\");\n\nform.addEventListener(\"submit\", handleSubmit);\nloadBtn.addEventListener('click', handleBtn);\n//\n\n// async function fetchData(url, options = {}) {\n//     const response = await fetch(url, options);\n//     if(!response.ok) {\n//         throw new Error(response.statusText);\n//     }\n//     return await response.json();\n// }\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    container.innerHTML = \"\";\n   loadBtn.classList.add('is-hidden');\n  load.style.display = \"flex\";\n  page = 1;\n    const searchOption = event.target.elements.askChoice;\n     serh = searchOption.value.trim();\n\n    try {\n        const response = await fetchData(serh, page);\n\n       \n    \n        if (!response.total) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                backgroundColor: 'yellow',\n                color: 'white',\n                position: 'topRight',\n                close: true,\n                timeout: 5000\n            })\n        }\n\n        \n        container.insertAdjacentHTML(\"beforeend\", createMarkup(response.hits))\n\n        ligthBox = new SimpleLightbox('.container a', {\n            captionsData: \"alt\", captionPosition: \"bottom\",\n            captionDelay: 250\n        });\n\n        ligthBox.refresh();\n      \n         if (response.totalHits > 15) {\n             loadBtn.classList.remove('is-hidden');\n         }\n  \n    } catch (error) {\n        console.log(error.message);\n    } finally {\n    \n        load.style.display = \"none\";\n        form.reset();\n  \n    }\n\n}\n\n\nasync function handleBtn() {\n  load.style.display = \"flex\";\n  page += 1;\n  try {\n    const response = await fetchData(serh, page)\n    \n      container.insertAdjacentHTML(\"beforeend\", createMarkup(response.hits));\n      ligthBox = new SimpleLightbox('.container a', {\n              captionsData: \"alt\", captionPosition: \"bottom\",\n              captionDelay: 250\n          });\n      ligthBox.refresh();\n      // Функція для скролу\n      const { height: cardHeight } = document.querySelector('.container')\n      .firstElementChild.getBoundingClientRect();\n\n      window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n      });\n      const lastPage = Math.ceil(response.totalHits / 15);\n      \n      if (lastPage === page) {\n        loadBtn.classList.add('is-hidden');\n        return iziToast.show({\n          message:\n                \"We're sorry, but you've reached the end of search results\",\n             backgroundColor: 'yellow',\n                color: 'white',\n                position: 'topRight',\n                close: true,\n                timeout: 5000\n        });\n      }\n    \n  } catch (error) {\n    console.log(error.message);\n  } finally {\n  load.style.display = \"none\";\n  }\n\n}\n\n\n\n"],"names":["axios","API_KEY","urlAXIOS","fetchData","query","page","createMarkup","arr","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","container","load","loadBtn","serh","ligthBox","handleSubmit","handleBtn","event","response","iziToast","SimpleLightbox","error","cardHeight"],"mappings":"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"}